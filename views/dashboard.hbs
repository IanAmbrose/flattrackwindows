<!DOCTYPE html>
<html>
  <head>
    <title>Dashboard</title>
  </head>
  <body>
    <h1>Welcome to the dashboard, {{username}}!</h1>

    <% if (userGroups.length > 0) { %>
      <h2>Your Groups:</h2>
      <ul>
        <% userGroups.forEach(group => { %>
          <li><%= group.name %> (<a href="/dashboard/leave-group/<%= group._id %>">Leave Group</a>)</li>
        <% }); %>
      </ul>
    <% } else { %>
      <p>You are not a member of any groups yet.</p>
    <% } %>

    <hr>

    <h2>Group Management:</h2>

    <h3>Create a new group:</h3>
    <% if (messages && messages.createGroupError) { %>
      <p style="color: red;"><%= messages.createGroupError %></p>
    <% } else if (messages && messages.createGroupSuccess) { %>
      <p style="color: green;"><%= messages.createGroupSuccess %></p>
    <% } %>
    <form method="POST" action="/dashboard/create-group">
      <label for="groupName">Group Name:</label>
      <input type="text" id="groupName" name="groupName" required>
      <button type="submit">Create Group</button>
    </form>

    <hr>

    <h3>Join an existing group:</h3>
    <% if (messages && messages.joinGroupError) { %>
      <p style="color: red;"><%= messages.joinGroupError %></p>
    <% } else if (messages && messages.joinGroupSuccess) { %>
      <p style="color: green;"><%= messages.joinGroupSuccess %></p>
    <% } %>
    <form method="POST" action="/dashboard/join-group">
      <label for="groupCode">Group Code:</label>
      <input type="text" id="groupCode" name="groupCode" required>
      <button type="submit">Join Group</button>
    </form>

    <hr>

    <h3>Your Account:</h3>
    <p><a href="/logout">Logout</a></p>

  </body>
</html>
